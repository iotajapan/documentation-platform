{"path":"docs/iri/0.1/how-to-guides/run-an-iri-node-in-docker","templateID":1,"sharedPropsHashes":{},"localProps":{"markdown":"# Run an IRI node in a Docker container\n\n**When you run the IRI in a Docker container, your computer becomes a Linux server for an IRI node, which gives you direct access to an IOTA network. By running an IRI node, you help the IOTA network to become more distributed by adding to the number of ledgers and validating your neighbor IRI node's transactions.**\n\n## Prerequisites\n\n* To run the IRI, your computer must meet the following minimum requirements:\n    * 4GB RAM\n    * 64-bit processor\n    * A [public IP address](/docs/general/0.1/how-to-guides/expose-your-local-device) that's either static or connected to a dynamic DNS service such as [duckdns.org](https://www.duckdns.org)\n\n* By default, the IRI uses the following ports. If you're running a Linux server on your local network, you must [forward these ports to your computer's public IP address](/docs/general/0.1/how-to-guides/expose-your-local-device).\n\n    * **UDP neighbor peering port:** 14600\n    * **TCP neighbor peering port:** 14600\n    * **TCP API port:** 14265\n\n---\n\nThe IRI Docker container is suitable for the following operating systems:\n* Linux\n* Mac\n* Windows\n\nIf you're using a Linux operating system, add `sudo` before all the commands in the following tasks.\n\nThe IRI is Java software, so it must be run in a Java runtime environment (JRE).\nThe IRI Docker container contains the necessary software to run the IRI.\n\nYou have two options for downloading the IRI Docker container:\n* [Download the pre-built Docker container](#download-the-pre-built-iri-docker-container)(quickest option)\n* [Build the Docker container from the source code](#build-the-iri-docker-container-from-the-source-code)\n\n## Install Docker\n\nTo build the IRI Docker container, Docker 17.05+ (for multi-stage build support) must be installed on your computer.\n\n1. [Install Docker](https://docs.docker.com/install/#supported-platforms). If you're running a version of Mac or Windows that's older than the system requirements, install the [Docker toolbox](https://docs.docker.com/toolbox/overview/) instead.\n\n2. Make sure that Docker is installed\n\n    ```bash\n    docker run hello-world\n    ```\n\n    You should see some Docker information like the following:\n\n    ```\n    Unable to find image 'hello-world:latest' locally\n    latest: Pulling from library/hello-world\n    1b930d010525: Pull complete\n    Digest: sha256:2557e3c07ed1e38f26e389462d03ed943586f744621577a99efb77324b0fe535\n    Status: Downloaded newer image for hello-world:latest\n\n    Hello from Docker!\n    This message shows that your installation appears to be working correctly.\n\n    To generate this message, Docker took the following steps:\n    1. The Docker client contacted the Docker daemon.\n    2. The Docker daemon pulled the \"hello-world\" image from the Docker Hub.\n        (amd64)\n    3. The Docker daemon created a new container from that image which runs the\n        executable that produces the output you are currently reading.\n    4. The Docker daemon streamed that output to the Docker client, which sent it\n        to your terminal.\n\n    To try something more ambitious, you can run an Ubuntu container with:\n    docker run -it ubuntu bash\n\n    Share images, automate workflows, and more with a free Docker ID:\n    https://hub.docker.com/\n\n    For more examples and ideas, visit:\n    https://docs.docker.com/get-started/\n    ```\n  \n## Download the pre-built IRI Docker container\n\nThe Docker container for the pre-built IRI Java file is available on the IOTA GitHub repository.\n\n```bash\ndocker pull iotaledger/iri:latest\n```\n\n## Build the IRI Docker container from the source code\n\nInstead of downloading the pre-built Docker container, you may want to build the file from the source code for any of the following reasons:\n* You want to be sure that the code you run is the same as the source code\n* You want to modify the code before you run it\n\n1. [Install Git](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git)\n\n2. Make sure that Git is installed\n\n    ```bash\n    git --version\n    ```\n\n    You should see the version number of your Git installation.\n\n3. Build the latest version of the IRI\n\n    ```bash\n    git clone https://github.com/iotaledger/iri.git\n    cd iri\n    export TAG=$(git describe --tags $(git rev-list --tags --max-count=1))\n    git checkout ${TAG}\n    docker build -t iri .\n    ```\n\n## Run the IRI\n\nYou can configure the IRI by passing in [IRI configuration options](../references/iri-configuration-options.md) as flags.\n\n1. Run the IRI with the `-p` flag to specify the API port\n\n    ```bash\n    docker run --name iri iotaledger/iri:latest --remote -p 14265\n    ```\n\n    If you want to save your configuration options in an IRI configuration file, you must pass the path to that file along with the `-c` flag. For example, if you save a config.ini file in the `/path/to/conf/config.ini` on your Docker host, then add `-c /path/to/conf/config.ini` to the DOCKER RUN command.\n\n    :::info:\n    If you built the IRI Docker container from the source code, you must change the value of the `-name` flag to `iri iri:latest`.\n    :::\n    :::info:\n    To have the IRI Docker container restart on every reboot, add the `--restart=always` flag to the DOCKER RUN command.\n    :::\n\n2. Call the [getNodeInfo](../references/api-reference.md#getnodeinfo) endpoint to request general information about the IRI node\n\n    ```bash\n    curl -s http://localhost:14265 -X POST -H 'X-IOTA-API-Version: 1' -H 'Content-Type: application/json' -d '{\"command\": \"getNodeInfo\"}' | jq\n    ```\n\n    You should see something like the following in the output:\n\n    ```json\n    {\n    \"appName\": \"IRI\",\n    \"appVersion\": \"1.7.0-RELEASE\",\n    \"jreAvailableProcessors\": 8,\n    \"jreFreeMemory\": 2115085674,\n    \"jreVersion\": \"1.8.0_191\",\n    \"jreMaxMemory\": 20997734400,\n    \"jreTotalMemory\": 4860129502,\n    \"latestMilestone\": \"CUOENIPTRCNECMVOXSWKOONGZJICAPH9FIG9F9KYXF9VYXFUKTNDCCLLWRZNUHZIGLJZFWPOVCIZA9999\",\n    \"latestMilestoneIndex\": 1050373,\n    \"latestSolidSubtangleMilestone\": \"CUOENIPTRCNECMVOXSWKOONGZJICAPH9FIG9F9KYXF9VYXFUKTNDCCLLWRZNUHZIGLJZFWPOVCIZA9999\",\n    \"latestSolidSubtangleMilestoneIndex\": 1050373,\n    \"milestoneStartIndex\": -1,\n    \"lastSnapshottedMilestoneIndex\": 1039138,\n    \"neighbors\":0,\n    \"packetsQueueSize\":0,\n    \"time\":1548407444641,\n    \"tips\":0,\n    \"transactionsToRequest\":0,\n    \"features\":[\"snapshotPruning\",\"dnsRefresher\",\"tipSolidification\"],\n    \"coordinatorAddress\": \"EQSAUZXULTTYZCLNJNTXQTQHOMOFZERHTCGTXOLTVAHKSA9OGAZDEKECURBRIXIJWNPFCQIOVFVVXJVD9\",\n    \"duration\": 0\n    }\n    ```\n    \n    You'll notice in the output that the value of the `neighbors` field is 0. The IRI node is not yet connected to an IOTA network. To do so, you need to connect to [neighbor IRI nodes](../concepts/neighbor-iri-node.md).\n\n3. [Find neighbors](../how-to-guides/find-neighbor-iri-nodes.md) and add their URL or IP addresses to your config.ini file\n\nNow that your node is up and running, it'll start to [synchronize its ledger with the network](../concepts/the-ledger.md#ledger-synchronization). Give your node some time to synchronize, or read our troubleshooting guide if your IRI node isn't synchronizing.\n\n## Check that the IRI is synchronized\n\nThe IRI is considered synchronized when the `latestMilestoneIndex` field is equal to the `latestSolidSubtangleMilestoneIndex` field.\n\nThe `latestMilestoneIndex` field is the index of the latest milestone that the IRI has received from its neighbors.\n\nThe `latestSolidSubtangleMilestoneIndex` field is the index of the latest milestone for which the IRI node's ledger has all the transactions that the milestone directly and indirectly references.\n\nThe `latestMilestoneIndex` and `latestSolidSubtangleMilestoneIndex` fields are accurate only when the IRI node is connected to synchronized neighbors.\n\n1. To check the actual `latestMilestoneIndex` field, go to our [Discord](https://discordapp.com/invite/fNGZXvh) and enter **!milestone** in one of the channels\n\n    ![Entering !milestone on Discord](/assets/docs/iri/0.1/images/discord-milestone-check.PNG)\n\n2. To check these fields for your IRI node, call the `getNodeInfo` API endpoint\n\n    ```bash\n    curl -s http://localhost:14265 -X POST -H 'X-IOTA-API-Version: 1' -H 'Content-Type: application/json' -d '{\"command\": \"getNodeInfo\"}'\n    ```\n\n:::info:\nIt may take some time for the IRI to synchronize. For help with any issues, read our [troubleshooting guide](../references/troubleshooting.md).\n:::\n\n## Next steps\n\n* [Interact with an IRI node](../how-to-guides/interact-with-an-iri-node.md)\n* [Subscribe to events in an IRI node](../how-to-guides/subscribe-to-events-in-an-iri-node.md)\n","title":"Run an IRI node in Docker | How-to Guides | IRI"}}
