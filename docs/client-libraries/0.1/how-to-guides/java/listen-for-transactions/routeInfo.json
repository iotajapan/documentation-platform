{"path":"docs/client-libraries/0.1/how-to-guides/java/listen-for-transactions","templateID":1,"sharedPropsHashes":{},"localProps":{"markdown":"# Java でライブトランザクションをリッスンする\n<!-- # Listen for live transactions in Java -->\n\n**このガイドでは，[IRI ノードソフトウェア](/docs/node-software/0.1/iri/introduction/overview)を実行する[ノード](/docs/getting-started/0.1/network/nodes)の[ゼロメッセージキュー（ZMQ）](https://zeromq.org/)にサブスクライブして，タングル上の最近のトランザクションをリッスンします．**\n<!-- **In this guide, you listen to the Tangle for recent transactions by subscribing to the [zero message queue (ZMQ)](https://zeromq.org/) on [nodes](/docs/getting-started/0.1/network/nodes) that run the [IRI node software](/docs/node-software/0.1/iri/introduction/overview).** -->\n\n## IOTA ネットワーク\n<!-- ## IOTA network -->\n\nこのガイドでは，[デブネット](/docs/getting-started/0.1/network/iota-networks#devnet)の[ノード](/docs/getting-started/0.1/network/nodes)に接続します．\n<!-- In this guide, we connect to a node on the [Devnet](/docs/getting-started/0.1/network/iota-networks#devnet). -->\n\n## コードウォークスルー\n<!-- ## Code walkthrough -->\n\n1. クラスをインポートします．\n  <!-- 1. Import the class -->\n\n    ```java\n    package com.iota;\n\n    import org.zeromq.ZMQ;\n    ```\n\n2. ソケットをノードの ZMQ ポートに接続します．\n  <!-- 2. Connect the socket to a node's ZMQ port -->\n\n    ```java\n    ZMQ.Context context = ZMQ.context(1);\n    ZMQ.Socket socket = context.socket(ZMQ.SUB);\n\n    socket.connect(\"tcp://zmq.devnet.iota.org:5556\");\n    ```\n\n3. [`tx` および `sn`](/docs/node-software/0.1/iri/references/zmq-events) イベントをサブスクライブして，すべてのトランザクションと確定済みのトランザクションを表示します．\n  <!-- 3. Subscribe to the [`tx` and `sn`](/docs/node-software/0.1/iri/references/zmq-events) events to see all transactions and confirmed transactions -->\n\n    ```java\n    socket.subscribe(\"tx\");\n    socket.subscribe(\"sn\");\n    ```\n\n4. ノードが返すイベントデータを処理します．\n  <!-- 4. Process the event data that the node returns -->\n\n    ```java\n    while(true) {\n        byte[] reply = socket.recv(0);\n        String[] data = (new String(reply).split(\" \"));\n\n        if(data[0].equals(\"tx\")) System.out.println(\"NEW TRANSACTION\" + \"\\n\" + \"Transaction hash: \" + data[1] + \"\\n\" + \"Address: \" + data[2] + \"\\n\" + \"Value: \" + data[3] + \"\\n\" + \"Tag: \" + data[4] + \"\\n\");\n        if(data[0].equals(\"sn\")) System.out.println(\"CONFIRMED\" + \"\\n\" + \"Transaction hash: \" + data[2] + \"\\n\" + \"Address: \" + data[3] + \"\\n\");\n    }\n    ```\n\n    コンソールに，トランザクションデータが表示されます．\n    <!-- In the console, you should see transaction data. -->\n\n:::success:おめでとうございます:tada:\nトランザクションをリッスンしています．\n:::\n<!-- :::success:Congratulations :tada: -->\n<!-- You're listening to transactions -->\n<!-- ::: -->\n\n## コードを実行する\n<!-- ## Run the code -->\n\nこれらのコードサンプルは [GitHub](https://github.com/iota-community/java-iota-workshop) でホストされています．\n<!-- These code samples are hosted on [GitHub](https://github.com/iota-community/java-iota-workshop). -->\n\n開始するには，デバイスに [Git](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git) がインストールされている必要があります．\n<!-- To get started you need [Git](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git) installed on your device. -->\n\nまた，[Maven](https://maven.apache.org/download.cgi) ビルドツールを使用する Java 開発環境も必要です．Java クライアントライブラリを初めて使用する場合は，[スタートガイド](../../getting-started/java-quickstart.md)を完了し，Maven でライブラリをインストールするための指示に従ってください．\n<!-- You also need a Java development environment that uses the [Maven](https://maven.apache.org/download.cgi) build tool. If this is your first time using the Java client library, complete our [getting started guide](../../getting-started/java-quickstart.md), and follow the instructions for installing the library with Maven. -->\n\nコマンドラインで，次を実行します．\n<!-- In the command-line, do the following: -->\n\n--------------------\n### Linux and macOS\n```bash\ngit clone https://github.com/iota-community/java-iota-workshop.git\ncd java-iota-workshop\nmvn clean install\nmvn exec:java -Dexec.mainClass=\"com.iota.ListenToZMQ\"\n```\n---\n### Windows\n```bash\ngit clone https://github.com/iota-community/java-iota-workshop.git\ncd java-iota-workshop\nmvn clean install\nmvn exec:java -D\"exec.mainClass\"=\"com.iota.ListenToZMQ\"\n```\n--------------------\n\nコンソールに，トランザクションデータが表示されます．\n<!-- In the console, you should see transaction data. -->\n\n## 次のステップ\n<!-- ## Next steps -->\n\nインスピレーションについては，[アプリ設計図](/docs/blueprints/0.1/introduction/overview)をご覧ください．\n<!-- Take a look at our [app blueprints](/docs/blueprints/0.1/introduction/overview) for inspiration. -->\n","title":"タングル上のライブトランザクションをリッスンする | Java | ハウツーガイド | クライアントライブラリ"}}
