{"path":"docs/client-libraries/0.1/mam/js/create-public-channel","templateID":1,"sharedPropsHashes":{},"localProps":{"markdown":"# パブリックメッセージを発行する\n<!-- # Publish public messages -->\n\n**誰でも読むことができるチャネルにメッセージを発行したい場合は、パブリックチャネルを使用できます。パブリックチャネルは、すべてのユーザーに対して開かれているトランザクションのアドレスを使用して、すべてのユーザーがメッセージを見つけて復号化できるように開いています。パブリックチャネルは、データをイミュータブルにする公示またはパブリックソーシャルメディアアプリケーションに役立ちます。**\n<!-- **If you want to publish messages to a channel that anyone can read, you can use a public channel. These channels are open for any user to find and decrypt the messages, using the address of the transaction that it's in. This type of channel is useful for public announcements or public social media applications that want the data to be immutable.** -->\n\n## パッケージ\n<!-- ## Packages -->\n\nこのガイドを完了するには、次のパッケージをインストールする必要があります。\n<!-- To complete this guide, you need to install the following packages: -->\n\n--------------------\n### npm\n```bash\nnpm install @iota/mam @iota/converter\n```\n---\n### Yarn\n```bash\nyarn add @iota/mam @iota/converter\n```\n--------------------\n\n## IOTAネットワーク\n<!-- ## IOTA network -->\n\nこのガイドでは、次のネットワーク設定で[Devnet](/docs/getting-started/0.1/network/iota-networks#devnet)の[node](/docs/getting-started/0.1/network/nodes)に接続します。\n<!-- In this guide, we connect to a [node](/docs/getting-started/0.1/network/nodes) on the [Devnet](/docs/getting-started/0.1/network/iota-networks#devnet) with the following network settings: -->\n\n- **[最小重量値 (MWM)](/docs/getting-started/0.1/network/minimum-weight-magnitude)**: 9\n<!-- - **[Minimum weight magnitude](/docs/getting-started/0.1/network/minimum-weight-magnitude)**: 9 -->\n\n- **[深さ (depth)](/docs/getting-started/0.1/transactions/depth)**: 3\n<!-- - **[Depth](/docs/getting-started/0.1/transactions/depth)**: 3 -->\n\n## コードウォークスルー\n<!-- ## Code walkthrough -->\n\n1. パッケージを`require`します。\n  <!-- 1. Require the packages -->\n\n  ```js\n  const Mam = require('@iota/mam');\n  const { asciiToTrytes, trytesToAscii } = require('@iota/converter');\n  ```\n\n2. プライバシーモードをパブリックに設定し、Devnetノードに接続し、ユーザーインターフェイスでメッセージを表示するために使用するMAMエクスプローラーURLを設定します\n  <!-- 2. Set the privacy mode to public, connect to a Devnet node, and set the MAM explorer URL to use for seeing messages in a user interface -->\n\n  ```js\n  const mode = 'public';\n  const provider = 'https://nodes.devnet.iota.org';\n\n  const mamExplorerLink = `https://mam-explorer.firebaseapp.com/?provider=${encodeURIComponent(provider)}&mode=${mode}&root=`;\n  ```\n\n3. MAMステートを初期化します。\n  <!-- 3. Initialize the MAM state -->\n\n  ```js\n  let mamState = Mam.init(provider);\n  ```\n\n4. ASCIIデータをトライトに変換し、MAMチャネルに発行する前にJSONに保存する関数を作成します。\n  <!-- 4. Create a function to convert ASCII data to trytes and store it in JSON before publishing it to a MAM channel -->\n\n  ```js\n  const publish = async packet => {\n    // トライとの文字列としてMAMメッセージを作成します。\n    const trytes = asciiToTrytes(JSON.stringify(packet));\n    const message = Mam.create(mamState, trytes);\n\n    // 新しいmamStateを保存します。\n    mamState = message.state;\n    // タングルにメッセージを添付します。\n    await Mam.attach(message.payload, message.address, 3, 9)\n\n    console.log('Published', packet, '\\n');\n    return message.root\n  }\n  ```\n\n  :::info:\n  `message.root`プロパティは、このMAMストリームのMAMチャネルIDです。\n  :::\n  <!-- :::info: -->\n  <!-- The `message.root` property is the MAM channel ID for this MAM stream. -->\n  <!-- ::: -->\n\n5. 3つのMAMメッセージを発行する関数を作成します。\n  <!-- 5. Create a function that publishes three MAM messages -->\n\n  ```js\n  const publishAll = async () => {\n    const root = await publish({\n      message: 'Message from Alice',\n      timestamp: (new Date()).toLocaleString()\n    })\n\n    await publish({\n      message: 'Message from Bob',\n      timestamp: (new Date()).toLocaleString()\n    })\n\n    await publish({\n      message: 'Message from Charlie',\n      timestamp: (new Date()).toLocaleString()\n    })\n\n    return root\n  }\n  ```\n\n6. メッセージを発行し、取得し、復号化します。\n  <!-- 6. Publish the messages, fetch them, and decrypt them -->\n\n  ```js\n  // フェッチからデータを渡すために使用されるコールバック\n  const logData = data => console.log('Fetched and parsed', JSON.parse(trytesToAscii(data)), '\\n')\n\n  publishAll()\n    .then(async root => {\n\n      // \"logData\" コールバック関数を使用して非同期的に出力します\n      await Mam.fetch(root, mode, null, logData)\n\n      // フェッチが完了すると同期的に出力します\n      const result = await Mam.fetch(root, mode)\n      result.messages.forEach(message => console.log('Fetched and parsed', JSON.parse(trytesToAscii(message)), '\\n'))\n  ```\n\n7. コンソールへリンクを出力して、MAMエクスプローラーでこれらのメッセージを確認します。\n  <!-- 7. Print the link to the console to see these messages in the MAM Explorer -->\n\n  ```js\n      console.log(`Verify with MAM Explorer:\\n${mamExplorerLink}${root}\\n`);\n    })\n  ```\n\nコンソールに次のようなものが表示されるはずです。\n<!-- You should see something like the following in the console: -->\n\n```bash\nPublished { message: 'Message from Alice',\n  timestamp: '9/12/2019, 10:07:53 AM' }\n\nPublished { message: 'Message from Bob',\n  timestamp: '9/12/2019, 10:07:59 AM' }\n\nPublished { message: 'Message from Charlie',\n  timestamp: '9/12/2019, 10:08:08 AM' }\n\nFetched and parsed { message: 'Message from Alice',\n  timestamp: '9/12/2019, 10:07:53 AM' }\n\nFetched and parsed { message: 'Message from Bob',\n  timestamp: '9/12/2019, 10:07:59 AM' }\n\nFetched and parsed { message: 'Message from Charlie',\n  timestamp: '9/12/2019, 10:08:08 AM' }\n\nFetched and parsed { message: 'Message from Alice',\n  timestamp: '9/12/2019, 10:07:53 AM' }\n\nFetched and parsed { message: 'Message from Bob',\n  timestamp: '9/12/2019, 10:07:59 AM' }\n\nFetched and parsed { message: 'Message from Charlie',\n  timestamp: '9/12/2019, 10:08:08 AM' }\n\nVerify with MAM Explorer:\nhttps://mam-explorer.firebaseapp.com/?provider=https%3A%2F%2Fnodes.devnet.iota.org&mode=public&root=9LBMBRUAJIRNASMNJP99ZMNVKNOER9XGVSLJLECEXBTNADHPWGO9FMBRRAGZPKEPSRLJ9SZYQU9EVLMPC\n```\n\n:::success:おめでとうございます:tada:\n制限付きMAMチャネルにメッセージを公開しました。このチャネルに公開するものはすべて、サイドキーを付与したユーザーのみが復号化できます。\n:::\n<!-- :::success:Congratulations :tada: -->\n<!-- You've published messages to a restricted MAM channel. Anything you publish to this channel can be decrypted only by those to whom you give the side key. -->\n<!-- ::: -->\n\n## コードを実行する\n<!-- ## Run the code -->\n\n緑色のボタンをクリックしてサンプルコードを実行し、Webブラウザーで結果を確認します。\n<!-- Click the green button to run the sample code and see the results in the web browser. -->\n\n<iframe height=\"600px\" width=\"100%\" src=\"https://repl.it/@jake91/MAM-public?lite=true\" scrolling=\"no\" frameborder=\"no\" allowtransparency=\"true\" allowfullscreen=\"true\" sandbox=\"allow-forms allow-pointer-lock allow-popups allow-same-origin allow-scripts allow-modals\"></iframe>\n\n## Next steps\n\n[Publish private MAM messages](../js/create-restricted-channel.md).\n","title":"パブリックメッセージを発行する | JavaScript | MAM | クライアントライブラリ"}}
