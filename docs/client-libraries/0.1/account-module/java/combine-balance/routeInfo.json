{"path":"docs/client-libraries/0.1/account-module/java/combine-balance","templateID":1,"sharedPropsHashes":{},"localProps":{"markdown":"# Combine your balance into one CDA in Java\n\n**You may want to keep the majority of your balance on as few CDAs as possible. This way, making payments is faster and requires fewer transactions. In this guide, you transfer your entire available balance to a new CDA.**\n\n## IOTA network\n\nIn this guide, we connect to a node on the [Devnet](/docs/getting-started/0.1/network/iota-networks#devnet).\n\n## Code walkthrough\n\n1. Create a CDA that has your account's total available balance as its expected amount\n\n    ```java\n\tDate timeoutAt = new Date(System.currentTimeMillis() + 24000 * 60 * 60);\n\n    ConditionalDepositAddress cda = account.newDepositAddress(timeoutAt, true, account.availableBalance()).get();\n    ```\n\n    :::info:\n    Available balance is the total balance of all expired CDAs, which is safe to withdraw.\n\n    Your account's total balance includes CDAs that are still active as well as expired, which is unsafe to withdraw.\n    :::\n\n2. Transfer your total available balance to the CDA\n\n    ```java\n    Bundle bundle = account.send(\n        cda.getDepositAddress().getHashCheckSum(), \n        cda.getRequest().getExpectedAmount(), \n        Optional.of(\"Sweep of all addresses\"),\n        Optional.of(\"IOTA9SWEEP\")).get();\n    System.out.printf(\"Sent deposit to %s in the bundle with the following tail transaction hash %s\\n\",\n    bundle.getTransactions().get(bundle.getLength() - 1).getAddress(), bundle.getTransactions().get(bundle.getLength() - 1).getHash());\n    ```\n\n:::success:\nNow your total available balance is in a single address.\n:::\n\n## Run the code\n\nTo get started you need [Git](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git) installed on your device.\n\nYou also need a Java development environment that uses the [Maven](https://maven.apache.org/download.cgi) build tool. If this is your first time using the Java client library, complete our [getting started guide](../../getting-started/java-quickstart.md), and follow the instructions for installing the library with Maven.\n\nIn the command-line, do the following:\n\n--------------------\n### Linux and macOS\n```bash\ngit clone https://github.com/JakeSCahill/iota-samples.git\ncd iota-samples/java/account-module\nmvn clean install\nmvn exec:java -Dexec.mainClass=\"com.iota.CombineBalance\"\n```\n---\n### Windows\n```bash\ngit clone https://github.com/JakeSCahill/iota-samples.git\ncd iota-samples/java/account-module\nmvn clean install\nmvn exec:java -D\"exec.mainClass\"=\"com.iota.CombineBalance\"\n```\n--------------------\n\nYou should see that the deposit was sent.\n\nYour seed state will contain this pending bundle until it is confirmed.\n\n## Next steps\n\n[Try exporting your seed state so you back it up or import it onto another device](../java/export-seed-state.md).","title":"複数の残高を結合する | Java | アカウントモジュール | CLライブラリ"}}
