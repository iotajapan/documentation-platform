{"path":"docs/client-libraries/0.1/account-module/js/create-account","templateID":1,"sharedPropsHashes":{},"localProps":{"markdown":"# Create an account in JavaScript\n\n**In this guide, you create an account to keep track of your seed state in a local database and learn how to display your available balance.**\n\n## Packages\n\nTo complete this guide, you need to install the following packages:\n\n--------------------\n### npm\n```bash\nnpm install @iota/account ntp-client\n```\n---\n### Yarn\n```bash\nyarn add @iota/account ntp-client\n```\n--------------------\n\n## IOTA network\n\nIn this guide, we connect to a node on the [Devnet](/docs/getting-started/0.1/network/iota-networks#devnet) with the following network settings:\n\n- **[Minimum weight magnitude](/docs/getting-started/0.1/network/minimum-weight-magnitude)**: 9\n\n- **[Depth](/docs/getting-started/0.1/transactions/depth)**: 3\n\n## Code walkthrough\n\n1\\. Create a new seed and back it up\n\n:::info:\nExisting seeds are not safe to use because their state is unknown. As such, these seeds may have spent addresses that the account is not aware of.\n:::\n\n--------------------\n### Linux\n```bash\ncat /dev/urandom |tr -dc A-Z9|head -c${1:-81}\n```\n---\n### macOS\n```bash\ncat /dev/urandom |LC_ALL=C tr -dc 'A-Z9' | fold -w 81 | head -n 1\n```\n---\n### Windows PowerShell\n```bash\n$b=[byte[]] (1..81);(new-object Security.Cryptography.RNGCryptoServiceProvider).GetBytes($b);-join($b|%{[char[]] (65..90+57..57)[$_%27]})\n```\n--------------------\n\n2\\. Define the seed that your account will use\n\n```js\nconst seed = 'PUEOTSEITFEVEWCWBTSIZM9NKRGJEIMXTULBACGFRQK9IMGICLBKW9TTEVSDQMGWKBXPVCBMMCXWMNPDX';\n```\n\n3\\. Define your network settings\n\n```js\n// The node to connect to\nconst provider = 'https://nodes.devnet.iota.org:443';\n\n// How far back in the Tangle to start the tip selection\nconst depth = 3;\n\n// The minimum weight magnitude for the Devnet\nconst minWeightMagnitude = 9;\n\n// How long to wait between each reattachment round\nconst delay = 1000 * 30;\n\n// The depth at which transactions are no longer promotable\n// and are automatically reattached\nconst maxDepth = 6;\n```\n\n3\\. Create a `timeSource` function that returns a promise, which the account will use to decide if your CDAs are still active. In this example, we use the [ntp-client](https://www.npmjs.com/package/ntp-client) package to connect to the [Google NTP (network time protocol) servers](https://developers.google.com/time/faq).\n\n```js\nconst timeSource = () => util.promisify(ntpClient.getNetworkTime)(\"time.google.com\", 123);\n```\n\n4\\. Create your account and connect it to a node\n\n```js\nconst account = createAccount({\n      seed,\n      provider,\n      depth,\n      minWeightMagnitude,\n      delay,\n      maxDepth,\n      timeSource\n});\n```\n\nBy default, the account includes a plugin that reattaches and promotes the tail transactions of any pending bundles that your account sends.\n\n:::info:\nThe default security level for CDAs is 2. You can change this setting by passing the account a `security` field.\n:::\n\n6\\. Start the account and any plugins, and open the database\n\n```js\naccount.start();\n```\n\n7\\. Check your account's balance\n\n```js\naccount.getAvailableBalance()\n.then(balance => {\n    console.log(`Your total available balance is: ${balance}`);\n})\n.catch(error => {\n    console.log(error);\n    // Close the database and stop any ongoing reattachments\n    account.stop();\n});\n```\n\nYou should see your balance.\n\n:::success:Congratulations! :tada:\nYou've created an account that will automatically promote and reattach transactions as well as manage the state of your seed.\n:::\n\n## Run the code\n\nTo get started you need [Git](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git) installed on your device.\n\nIf you don't have a JavaScript development environment, or if this is your first time using the JavaScript client library, complete our [getting started guide](../../getting-started/js-quickstart.md).\n\nIn the command-line, do the following:\n\n```bash\ngit clone https://github.com/JakeSCahill/iota-samples.git\ncd iota-samples/js/account-module\nnpm i\nnode create-account/create-account.js\n```\n\nYou should see the balance of your new account.\n\nYou'll also have a database file that keeps track of your seed state.\n\n## Next steps\n\nAfter certain events happen in your account, it emits them, and allows you to listen for them. For example, you may want to monitor your account for new payments. To do so, you need to [create an event listener](../js/listen-to-events.md).\n\nInstead of using the default `leveldown` flavor of the [LevelDB database](https://github.com/google/leveldb), you can use the [PersistenceAdapter](https://github.com/iotaledger/iota.js/tree/next/packages/persistence#PersistenceAdapter) interface to create a custom one.\n\n:::warning:\nA new adapter instance is created for each new account, therefore you can use only one adapter instance for each account at the same time.\n:::\n","title":"アカウントを作成する | JavaScript | アカウントモジュール | CLライブラリ"}}
