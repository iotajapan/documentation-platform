{"path":"docs/client-libraries/0.1/account-module/js/combine-balance","templateID":1,"sharedPropsHashes":{},"localProps":{"markdown":"# JavaScript で1つの CDA に残高をまとめる\n<!-- # Combine your balance into one CDA in JavaScript -->\n\n**残高の大半をできるだけ少ない CDA に保持することをお勧めします。これにより、支払いがより高速になり、必要なトランザクションが少なくなります。このガイドでは、利用可能な残高全体を新しいCDAに移行します。**\n<!-- **You may want to keep the majority of your balance on as few CDAs as possible. This way, making payments is faster and requires fewer transactions. In this guide, you transfer your entire available balance to a new CDA.** -->\n\n## パッケージ\n<!-- ## Packages -->\n\nこのガイドを完了するには、次のパッケージをインストールする必要があります。\n<!-- To complete this guide, you need to install the following packages: -->\n\n--------------------\n### npm\n```bash\nnpm install @iota/account @iota/transaction-converter ntp-client\n```\n---\n### Yarn\n```bash\nyarn add @iota/account @iota/transaction-converter ntp-client\n```\n--------------------\n\n## IOTA ネットワーク\n<!-- ## IOTA network -->\n\nこのガイドでは、[デブネット](/docs/getting-started/0.1/network/iota-networks#devnet)の[ノード](/docs/getting-started/0.1/network/nodes)に接続します。\n<!-- In this guide, we connect to a node on the [Devnet](/docs/getting-started/0.1/network/iota-networks#devnet). -->\n\n## コードウォークスルー\n<!-- ## Code walkthrough -->\n\n1. アカウントの利用可能残高を期待する CDA を作成します。\n  <!-- 1. Create a CDA that expects your account's available balance -->\n\n    ```js\n    account.getAvailableBalance()\n    .then(balance => {\n        const cda = account.generateCDA({\n                timeoutAt: Date.now() + 24 * 60 * 60 * 1000,\n                expectedAmount: balance\n        })\n    ```\n\n    :::info:\n    使用可能な残高は、期限切れとなったすべての CDA の合計残高であり、取り出しても安全です。\n\n    アカウントの合計残高には、まだアクティブな CDA が含まれているため、アカウントの合計残高からは取り出しできません。\n    :::\n    <!-- :::info: -->\n    <!-- Available balance is the total balance of all expired CDAs, which are safe to withdraw from. -->\n\n    <!-- Your account's total balance includes CDAs that are still active and so cannot be withdrawn from. -->\n    <!-- ::: -->\n\n2. CDA にデポジットを送信します。\n  <!-- 2. Send a deposit to your CDA -->\n\n    ```js\n        .then(cda => {\n                    account.sendToCDA({\n                    ...cda,\n                    value: balance\n                })\n                .then(trytes => {\n\n                    console.log(trytes)\n                    // 末尾トランザクションを取得し、オブジェクトへ変換します\n                    let bundle = TransactionConverter.asTransactionObject(trytes[0]);\n                    let bundleHash = bundle.bundle;\n                    let address = bundle.address\n                    let value = bundle.value;\n                    console.log(`Sent ${value} IOTA tokens to ${address} in bundle:  ${bundleHash}`);\n                })\n            })\n        }).catch(error => {\n        console.log(error);\n        // データベースを閉じ、進行中の再アタッチを停止します\n        account.stop();\n    });\n    ```\n\n    バンドルハッシュと同様に、アドレスに送信された IOTA トークンの量を確認する必要があります。\n    <!-- You should see that how many IOTA tokens were sent to your address as well as the bundle hash: -->\n\n    ```bash\n    Sent 1000 to TIZJIRDCZPRJMMVKSGROPKE9VGIQKOLOUSX9MCUTOEQBBHPMLYBVKBPCXJKY9SDWX9FVMOZTWNMVVEYKX in bundle:  RXIA9CBEOASNY9IRIARZFGDLK9YNGW9ZHJGJLUXOUKVGCZLPNDKALFHZWHZKQQXFTIHEIJJPN9EURO9K9\n    ```\n\n:::success:\n現在、利用可能な合計残高は単一のアドレスにあります。\n:::\n<!-- :::success: -->\n<!-- Now your total available balance is in a single address. -->\n<!-- ::: -->\n\n## コードを実行する\n<!-- ## Run the code -->\n\nこれらのコードサンプルは [GitHub](https://github.com/iota-community/account-module) でホストされています。\n<!-- These code samples are hosted on [GitHub](https://github.com/iota-community/account-module). -->\n\n開始するには、デバイスに [Git](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git) がインストールされている必要があります。\n<!-- To get started you need [Git](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git) installed on your device. -->\n\nJavaScript 開発環境がない場合、または JavaScript クライアントライブラリを初めて使用する場合は、[スタートガイド](../../getting-started/js-quickstart.md)を完了してください。\n<!-- If you don't have a JavaScript development environment, or if this is your first time using the JavaScript client library, complete our [getting started guide](../../getting-started/js-quickstart.md). -->\n\nコマンドラインで、次を実行します。\n<!-- In the command-line, do the following: -->\n\n```bash\ngit clone https://github.com/iota-community/account-module.git\ncd account-module/js/account-module\nnpm i\nnode combine-balance/combine-balance.js\n```\n\nデポジットが送信されたことがわかります。\n<!-- You should see that the deposit was sent. -->\n\n末尾トランザクションが確定されるまで、シードステートにはこのペンディング中のバンドルに含まれます。\n<!-- Your seed state will contain this pending bundle until its tail transaction is confirmed. -->\n\n## 次のステップ\n<!-- ## Next steps -->\n\n[シードステートをエクスポートして、バックアップするか、別のデバイスにインポートする](../js/export-seed-state.md)。\n<!-- [Try exporting your seed state so you back it up or import it onto another device](../js/export-seed-state.md). -->\n","title":"複数の残高を統合する | JavaScript | アカウントモジュール | CLライブラリ"}}
