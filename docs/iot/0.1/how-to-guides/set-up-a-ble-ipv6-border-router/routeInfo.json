{"path":"docs/iot/0.1/how-to-guides/set-up-a-ble-ipv6-border-router","templateID":1,"sharedPropsHashes":{},"localProps":{"markdown":"# Set up a border router\n\n**To allow the sensor servers in a star network to access the Internet, you need a border router that can pass on their data. In this guide, you use set up a border router on a Linux device.**\n\n## Prerequisites\n\nTo complete this guide, you need the following:\n\n- Either a single-board computer such as a Raspberry Pi or a Linux-based PC to use as the border router\n- A Linux distribution such as Ubuntu\n- Bluetooth <= 4.0 (USB dongle or integrated)\n\n## Step 1. Install a compatible Linux kernel\n\nDue to [a bug in RIOT OS](https://github.com/RIOT-OS/RIOT/issues/11147), you need to use an older Linux kernel (maximum version 4.12) to set up a border router.\n\n1. Check which version of the Linux kernel your device has\n\n    ```bash\n    uname -a\n    ```\n\n    If you see a version number that's greater than 4.12, continue to step 2. Otherwise, skip the rest of these steps and install the 6LoWPAN dependencies.\n\n2. Select your architecture and download the generic kernel image from the \n    [Ubuntu Linux mainline kernel builds](https://kernel.ubuntu.com/~kernel-ppa/mainline/v4.11.12/)\n\n\n3. Install the kernel\n\n    ```bash\n    sudo dpkg -i linux-image*.deb\n    ```\n\n4. Restart your system while holding the `SHIFT` key until you see the option to select a kernel \n    \n5. Select the kernel version 4.11.12\n\n## Step 2. Install the 6LoWPAN dependencies\n\n:::info:\nYou need to do these steps for every session. So, if you close your session, for example after a reboot, you have to reinstall these dependencies.\n:::\n\n1. Install bluez\n\n    ```bash\n    sudo apt-get install -y bluez\n    ```\n\n2. Log in as the root user\n\n    ```bash\n    sudo su\n    ```\n\n3. Mount the `debugfs` file system\n\n    ```bash\n    mount -t debugfs none /sys/kernel/debug\n    ```\n\n4. Load the Bluetooth 6LoWPAN Linux module\n\n    ```bash\n    modprobe bluetooth_6lowpan\n    ```\n\n5. Enable the 6LoWPAN module\n\n    ```bash\n    echo 1 > /sys/kernel/debug/bluetooth/6lowpan_enable\n    ```\n\n6. Find any available Bluetooth devices\n\n    ```bash\n    hciconfig\n    ```\n\n    You should see something like the following:\n\n    ```bash\n    hci0:   Type: Primary  Bus: UART\n        BD Address: B8:27:EB:57:16:51  ACL MTU: 1021:8  SCO MTU: 64:1\n        UP RUNNING\n        RX bytes:1528 acl:0 sco:0 events:92 errors:0\n        TX bytes:2558 acl:0 sco:0 commands:92 errors:0\n    ```\n\n7. To test your connection to a device, reset one. Replace the `YOUR_DEVICE_ID` placeholder with the ID of your device.\n\n    ```bash\n    hciconfig YOUR_DEVICE_ID reset\n    ```\n\n    For example:\n\n    ```bash\n    hciconfig hci0 reset\n    ```\n\nThe Bluetooth device should reset.\n\n## Next steps\n\nIf you haven't already set up a sensor server, [do it now](../how-to-guides/set-up-ipv6-ble-host-example.md).\n\nIf you've already set up a sensor server, then you have a complete Bluetooth star network, and you're ready to try one of our sample applications:\n\n* [Request data from the sensor server](../how-to-guides/run-an-environment-sensor-and-client.md)\n* [Attach sensor data to the Tangle](../how-to-guides/run-an-environment-to-tangle-app.md)\n\n\n","title":"Set up a border router | How-to Guides | IoTプロジェクト"}}
