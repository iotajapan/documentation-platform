{"path":"docs/wallets/0.1/hub/how-to-guides/get-started-with-rest-api","templateID":1,"sharedPropsHashes":{},"localProps":{"markdown":"# Get started with the RESTful API\n\n**When you expose Hub's RESTful API server, you can interact with it through HTTP endpoints. These endpoints allow you to manage users' tokens by interfacing with the Hub database and an IOTA node. In this guide, you learn the basics of the RESTful API to create a new user with some new deposit addresses.**\n\n## Prerequisites\n\nTo use the code samples in this guide, you must have the following:\n\n* [Node.js (8+)](https://nodejs.org/en/) or [Python (3+)](https://www.python.org/downloads/) and [PIP](https://pip.pypa.io/en/stable/installing/)\n* A code editor such as [Visual Studio Code](https://code.visualstudio.com/Download)\n* Access to a command prompt\n\n :::info:\nThe endpoints are all documented in the [RESTful API reference](../references/restful-api-reference.md).\n:::\n\n## Step 1. Set up a connection to Hub\n\n1\\. Install the libraries\n\n--------------------\n### Node.js\n\n```bash\nnpm install request --save\n```\n---\n### Python\n\n```bash\npip install urllib3\n```\n--------------------\n\n2\\. Import the libraries\n\n--------------------\n### Node.js\n\n```bash\nvar request = require('request');\n```\n---\n### Python\n\n```bash\nimport json\nimport urllib3\n```\n--------------------\n\n3\\. Set up the request body. Replace the `http://127.0.0.1:50051` URL with value of the `--listenAddress` flag that you used when you set up Hub.\n\n--------------------\n### Node.js\n\n```bash\nvar options = {\nurl: 'http://127.0.0.1:50051',\nmethod: 'POST',\nheaders: {\n    'Content-Type': 'application/json',\n    'X-IOTA-API-Version': '1',\n    'Content-Length': Buffer.byteLength(JSON.stringify(command))\n},\njson: command\n};\n\nrequest(options, function (error, response, data) {\n    if (!error && response.statusCode == 200) {\n        console.log(JSON.stringify(data));\n    }\n});\n```\n---\n### Python\n\n```bash\nhttp = urllib3.PoolManager()\n\nresponse = http.request('POST', 'http://127.0.0.1:50051',\n                 headers={'Content-Type': 'application/json', 'X-IOTA-API-Version': '1'},\n                 body=command)\n\nresults = json.loads(response.data.decode('utf-8'))\nprint(json.dumps(results, indent=1, sort_keys=True))\n```\n--------------------\n\n## Step 2. Deposit IOTA tokens into Hub\n\n1\\. Create a new user\n\n--------------------\n### Node.js\n\n```bash\ncommand = {\n  \"command\": \"CreateUser\",\n  \"userId\": \"Jake\"\n}\n```\n---\n### Python\n\n```bash\ncommand = json.dumps({\n  \"command\": \"CreateUser\",\n  \"userId\": \"Jake\"\n})\n```\n--------------------\n\nYou should see an empty object in the console, which means that the user was created.\n\n:::info:\nYou can see this user in the Hub database by [querying the `user_account` table](../how-to-guides/query-the-database.md).\n:::\n\n2\\. Create a new deposit address for the user\n\n--------------------\n### Node.js\n\n```bash\ncommand = {\n  \"command\": \"GetDepositAddress\",\n  \"userId\": \"Jake\"\n}\n```\n---\n### Python\n\n```bash\ncommand = json.dumps({\n  \"command\": \"GetDepositAddress\",\n  \"userId\": \"Jake\"\n})\n```\n--------------------\n\nYou should see a new deposit address in the console.\n\n3\\. Create a new deposit address with the checksum\n\n--------------------\n### Node.js\n\n```bash\ncommand = {\n  \"command\": \"GetDepositAddress\",\n  \"includeChecksum\": true,\n  \"userId\": \"Jake\"\n}\n```\n---\n### Python\n\n```bash\ncommand = json.dumps({\n  \"command\": \"GetDepositAddress\",\n  \"includeChecksum\": true,\n  \"userId\": \"Jake\"\n})\n```\n--------------------\n\nNow, the user has two addresses that were created from two different `seeduuid` fields. You can see this data in the database by [querying the `user_address` table](../how-to-guides/query-the-database.md).\n\n:::info:\nIn the database, addresses are always saved without the checksum.\n:::\n\n4\\. Send some IOTA tokens to one of the user's deposit addresses\n\n:::info:\n[Trinity](/docs/wallets/0.1/trinity/introduction/overview) is the official IOTA wallet, which makes it easy to send IOTA tokens.\n::: \n\n5\\. Get the balance and history for the user  \n\n--------------------\n### Node.js\n\n```bash\ncommand = {\n  \"command\": \"GetBalance\",\n  \"userId\": \"Jake\"\n}\n```\n---\n### Python\n\n```bash\ncommand = json.dumps({\n  \"command\": \"GetBalance\",\n  \"userId\": \"Jake\"\n})\n```\n--------------------\n\nIf you sent IOTA tokens to the deposit address in step 4, the output should display something like the following:\n\n```shell\n10 i available for 'Jake'\nHistory:\nevents {\n\ttimestamp: 1540856214000\n\ttype: DEPOSIT\n\tamount: 10\n}\n```\n\nIf you look at the deposit address history in a Tangle explorer such as [thetangle.org](https://thetangle.org/), you will see that Hub moved the funds away from the deposit address and into another address (Hub owner's address where funds are aggregated until a user requests a withdrawal). This process is called a [sweep](../concepts/sweeps.md).\n\n:::success:Congratulations :tada:\nYou've successfully created a new user and tested how Hub handles deposits of IOTA tokens.\n:::\n\n## Next steps\n\n[Set up a demo exchange](../how-to-guides/create-a-demo-exchange.md) to test an integration of Hub.\n\n[Integrate Hub into your exchange](../how-to-guides/integrate-hub.md).\n\n\n\n\n","title":"RESTful API入門 | ハウツーガイド | ハブ | ウォレット"}}
