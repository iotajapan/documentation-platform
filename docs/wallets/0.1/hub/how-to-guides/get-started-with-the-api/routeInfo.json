{"path":"docs/wallets/0.1/hub/how-to-guides/get-started-with-the-api","templateID":1,"sharedPropsHashes":{},"localProps":{"markdown":"# gRPC APIを使い始める\n<!-- # Get started with the gRPC API -->\n\n**ハブは、任意のgRPCクライアントを使用して呼び出すことができるいくつかのgRPCメソッドを公開しています。これらの方法で、データベースおよびIOTAネットワークとやり取りすることでユーザーのトークンを管理できます。このガイドでは、新しい預け入れアドレスを持つ新しいユーザーを作成するためのgRPC APIの基本について学習します。**\n<!-- **Hub exposes some gRPC methods that you can call using any gRPC client. These methods allow you to manage users' tokens by interfacing with the database and an IOTA network. In this guide, you'll learn the basics of the gRPC API to create a new user with some new deposit addresses.** -->\n\n:::info:\nこのガイドは、[CLIクライアント](https://github.com/njpatel/grpcc)でgRPC APIをテストするのに役立ちます。実稼働環境では、利用可能な[gRPCライブラリ](https://grpc.io/about/)の1つからクライアントコードを生成することをお勧めします。\n:::\n<!-- :::info: -->\n<!-- This guide helps you to test the gRPC API with [this CLI client](https://github.com/njpatel/grpcc). For production environments, we recommend generating client code from one of the available [gRPC libraries](https://grpc.io/about/). -->\n<!-- ::: -->\n\n## 前提条件\n<!-- ## Prerequisites -->\n[ハブをインストール](../how-to-guides/install-hub.md)し、そのガイドで使用しているサーバと同じサーバで実行する必要があります。\n<!-- You must have [installed Hub](../how-to-guides/install-hub.md) and it must be running on the same server as the one you'll use in this guide. -->\n\n---\n\n1. npmをインストールします。\n  <!-- 1. Install npm -->\n\n    ```bash\n    sudo apt install -y npm\n    ```\n\n2. grpccパッケージをインストールします。\n  <!-- 2. Install the grpcc package -->\n\n    ```bash\n    sudo npm install -g grpcc\n    ```\n\n3. `rpchub`ディレクトリに移動します。\n  <!-- 3. Change into the `rpchub` directory -->\n\n    ```bash\n    cd rpchub\n    ```\n4. gRPCクライアントを起動します。\n  <!-- 3. Start the gRPC client -->\n\n    ```bash\n    grpcc -i -a localhost:50051 -p proto/hub.proto\n    ```\n\n    次のようなものが見えるはずです。\n    <!-- You should see something like the following: -->\n\n    ```bash\n    Connecting to hub.rpc.Hub on localhost:50051. Available globals:\n\n    client - the client connection to Hub\n        createUser (CreateUserRequest, callback) returns CreateUserReply\n        getBalance (GetBalanceRequest, callback) returns GetBalanceReply\n        getDepositAddress (GetDepositAddressRequest, callback) returns GetDepositAddressReply\n        userWithdraw (UserWithdrawRequest, callback) returns UserWithdrawReply\n        userWithdrawCancel (UserWithdrawCancelRequest, callback) returns UserWithdrawCancelReply\n        getUserHistory (GetUserHistoryRequest, callback) returns GetUserHistoryReply\n        processTransferBatch (ProcessTransferBatchRequest, callback) returns ProcessTransferBatchReply\n        balanceSubscription (BalanceSubscriptionRequest, callback) returns BalanceEvent\n        getStats (GetStatsRequest, callback) returns GetStatsReply\n        sweepSubscription (SweepSubscriptionRequest, callback) returns SweepEvent\n        getAddressInfo (GetAddressInfoRequest, callback) returns GetAddressInfoReply\n        sweepInfo (SweepInfoRequest, callback) returns SweepEvent\n        signBundle (SignBundleRequest, callback) returns SignBundleReply\n        sweepDetail (SweepDetailRequest, callback) returns SweepDetailReply\n\n    printReply - function to easily print a unary call reply (alias: pr)\n    streamReply - function to easily print stream call replies (alias: sr)\n    createMetadata - convert JS objects into grpc metadata instances (alias: cm)\n    printMetadata - function to easily print a unary call's metadata (alias: pm)\n\n    Hub@localhost:50051> (node:6023) DeprecationWarning: grpc.load: Use the @grpc/proto-loader module with grpc.loadPackageDefinition instead\n    ```\n\n5. 新しいユーザーを作成します。\n  <!-- 4. Create a new user -->\n\n    ```bash\n    client.createUser({userId: \"Jake\"}, pr)\n    ```\n\n    :::info:\n    ステップ4のコンソールで、`createUser`メソッドが`CreateUserRequest`オブジェクトを受け取ることがわかります。そのオブジェクトは[APIリファレンス](../references/api-reference.md#hub.rpc.CreateUserRequest)で検索できます。\n\n    `pr`引数は、結果をコンソールに出力するビルド済みのコールバック関数です。\n    :::\n    <!-- :::info: -->\n    <!-- You can see in the console from step 3 that the `createUser` method takes a `CreateUserRequest` object. You can search for that object in the [API reference](../references/api-reference.md#hub.rpc.CreateUserRequest). -->\n    <!--  -->\n    <!-- The `pr` argument is a pre-built callback function that prints the result to the console. -->\n    <!-- ::: -->\n\n    これで、データベースに新しいユーザーができました。[`user_account`テーブルを照会する](../how-to-guides/query-the-database.md)と、データベース内にこのユーザーを確認できます。\n    <!-- Now, you'll have a new user in the database. You can see this user in the database by [querying the `user_account` table](../how-to-guides/query-the-database.md). -->\n\n6. ユーザーの新しい預け入れアドレスを作成します。\n  <!-- 5. Create a new deposit address for the user -->\n\n    ```bash\n    client.getDepositAddress({userId: \"Jake\"}, pr)\n    ```\n\n    コンソールに新しい預け入れアドレスが表示されます。\n    <!-- You should see a new deposit address in the console. -->\n\n7. チェックサムを持つ新しいアドレスを作成します。\n  <!-- 7. Create a new address with the checksum -->\n\n    ```bash\n    client.getDepositAddress({userId: \"Jake\", includeChecksum: true}, pr)\n    ```\n\n    これで、ユーザーは2つの異なる`seeduuid`フィールドから作成された2つのアドレスを持つことになります。[`user_address`テーブルを照会する](../how-to-guides/query-the-database.md)ことで、データベース内のこのデータを見ることができます。\n    <!-- Now, that user will have two addresses that were created from two different `seeduuid` fields. You can see this data in the database by [querying the `user_address` table](../how-to-guides/query-the-database.md). -->\n\n    :::info:\n    データベースでは、アドレスは常にチェックサムなしで保存されます。\n\n    すべてのアドレスは固有のシードから作成されます。すべてのシードは`seeduuid`フィールドの値と[`salt`](../references/command-line-flags.md)パラメータ（もし与えられていれば）のハッシュ値から作られます。\n    :::\n    <!-- :::info: -->\n    <!-- In the database, addresses are always saved without the checksum. -->\n    <!--  -->\n    <!-- All addresses are created from unique seeds. All seeds are created from a hash of the values of the `seeduuid` field and the [`salt`](../references/command-line-flags.md) parameter (if provided). -->\n    <!-- ::: -->\n\n8. **Ctrl**+**C**を2回押して、gRPCクライアントを停止します。\n  <!-- 8. Press **Ctrl**+**C** twice to stop the gRPC client -->\n\n:::success:おめでとうございます！:tada:\n2つの異なる預け入れアドレスを持つ新しいユーザーを作成するために2つのgRPCメソッドを使用しました。\nこれらの預け入れアドレスはそれぞれ、固有のシードから導出したものです。\n:::\n<!-- :::success:Congratulations!:tada: -->\n<!-- You've successfully used two gRPC methods to create a new user with two different deposit addresses. -->\n<!-- Each of these deposit addresses was derived from a unique seed. -->\n<!-- ::: -->\n\n## 次のステップ\n<!-- ## Next steps -->\n\n1. 預け入れアドレスのいずれかにIOTAトークンを預け入れます。\n<!-- 1. Send funds to one of the deposit addresses -->\n2. [`sweepSubscription()`](../references/api-reference.md#hub.rpc.SweepSubscriptionRequest)メソッドを使用して、新しいスウィープイベントを購読します。こうすることで、スウィープが行われるとハブから通知されます。\n<!-- 2. Use the [`sweepSubscription()`](../references/api-reference.md#hub.rpc.SweepSubscriptionRequest) method to subscribe to new sweep events. This way, Hub will let you know when a sweep takes place. -->\n3. [データベースを照会して](../how-to-guides/query-the-database.md)、各預け入れアドレスのシードを作成するために使用されたシードUUIDを見つけます。\n<!-- 3. [Query the database to find out the seed UUID](../how-to-guides/query-the-database.md) that was used to create the seed for each deposit address. -->\n4. [`userWithdraw()`](../references/api-reference.md#hub.rpc.UserWithdrawRequest)メソッドを使用して、預け入れアドレスからのIOTAトークンの取り出しを依頼します。\n<!-- 4. Use the [`userWithdraw()`](../references/api-reference.md#hub.rpc.UserWithdrawRequest) method to make a withdrawal request from the deposit address -->\n","title":"Get started with the API | How-to Guides | Hub | ウォレット"}}
