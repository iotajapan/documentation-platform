{"path":"docs/wallets/0.1/hub/how-to-guides/secure-hub-api","templateID":1,"sharedPropsHashes":{},"localProps":{"markdown":"# Secure the Hub API\n\n**ハブとアプリケーション間のAPI接続を保護するために、SSL暗号化を使用するようにハブを構成できます。このガイドでは、接続が暗号化されるようにハブAPIを保護します。**\n<!-- **To secure the API connection between Hub and your application, you can configure Hub to use SSL encryption. In this guide, you'll secure the Hub API so that the connection is encrypted.** -->\n\nDepending on which API type you configured Hub to expose, you should follow one of the following:\n\n- Secure the RESTful API\n- Secure the gRPC API\n\n### Prerequisites\n\nTo complete these guides, you need an [instance of Hub](../how-to-guides/install-hub.md).\n\n## Secure the RESTful API\n\nTo secure the RESTful API, you can configure Hub to use SSL certificates.\n\nSSL certificates are used to secure the communication between the Hub API server and the client. The Hub repository includes scripts that generate self-signed certificates for testing purposes.\n\n:::info:\nIf you want to use SSL certificates in a production environment, you should run a dedicated Certificate Authority (CA).\n:::\n\n1. Open the `generate_ca.sh` file\n\n\t```bash\n\tnano docs/ssl/rest/generate.sh\n\t```\n\n2. To increase the expiry date of the certificate to 9999 days, replace `-days 365` with `-days 9999`, and save the file\n\n3. Replace the common name in the `-subj` switch with the hostname of your device and save the file. For example, if your hostname is `signer`, replace `CN=localhost` with `CN=signer`.\n\n    :::info:\n    To find out your hostname, enter the `hostname` command in the command line.\n    :::\n\n4. Execute the script to generate the SSL files\n\n    ```bash\n    ./docs/ssl/rest/generate.sh\n    ```\n\n    You should now have three `.pem` files in the `hub` directory.\n\n5. Remove the PEM passphrase\n\n    ```bash\n    openssl rsa -in key.pem -out key.pem\n    ```\n\n6. Open the `start.sh` file and add the following command-line options. Replace the paths with the absolute paths to your `.pem` files.\n\n    ```bash\n    --authMode ssl\n    --sslCert /home/jake/hub/cert.pem\n    --sslKey /home/jake/hub/key.pem\n    --sslDH /home/jake/hub/dh.pem\n    ```\n\n7. Restart Hub\n\n8. Use cURL to send an API request to Hub\n\n    :::info:\n    Use the [`-k`](https://curl.haxx.se/docs/manpage.html#-k) flag so that cURL trusts your self-signed certificate.\n    :::\n\n    ```bash\n    curl -k https://localhost:50051 \\\n    -X POST \\\n    -H 'Content-Type: application/json' \\\n    -H 'X-IOTA-API-Version: 1' \\\n    -d '{\n    \"command\": \"CreateUser\",\n    \"userId\": \"Test\"\n    }'\n    ```\n\n:::success:Congratulations :tada:\nNow, you can make API calls to Hub using HTTPS.\n:::\n\n## Secure the gRPC API\n\nTo secure the gRPC API, you can configure Hub to use SSL certificates.\n\nSSL certificates are used to secure the communication between the Hub API server and the client. The Hub repository includes scripts that generate self-signed certificates for testing purposes.\n\n:::info:\nIf you want to use SSL certificates in a production environment, you should run a dedicated Certificate Authority (CA).\n:::\n\n1. Open the `01_generate_ca.sh` file\n\n\t```bash\n\tnano docs/ssl/grpc/01_generate_ca.sh\n\t```\n\n2. To increase the expiry date of the certificate to 9999 days, replace `-days 365` with `-days 9999`\n\n3. Replace the common name in the `-subj` switch with the hostname of your device and save the file. For example, if your hostname is `signer`, replace `CN=localhost` with `CN=signer`.\n\n    :::info:\n    To find out your hostname, enter the `hostname` command in the command line.\n    :::\n\n4. Repeat steps 1 to 3 for the `02_generate-server.sh` and `03_generate-client.sh` files\n\n5. Execute all three scripts\n\n\t```bash\n\t./docs/ssl/grpc/01_generate_ca.sh\n\t./docs/ssl/grpc/02_generate_server.sh\n\t./docs/ssl/grpc/03_generate_client.sh\n\t```\n\n    You should now have some SSL server and client certificate files.\n\n6. Open the `start.sh` file and add the following command-line options. Replace the paths with the absolute paths to your SSL files.\n\n    ```bash\n    --authMode ssl \\\n\t--sslKey /home/jake/hub/docs/ssl/grpc/server.key \\\n\t--sslCert /home/jake/hub/docs/ssl/grpc/server.crt \\\n\t--sslCA /home/jake/hub/docs/ssl/grpc/ca.crt\n    ```\n\n7. Restart Hub\n\n:::success:Congratulations :tada:\nNow, you can make API calls to Hub using HTTPS.\n:::\n\n## Next steps\n\n[Install and run the signing server](../how-to-guides/install-the-signing-server.md) to secure your salt.\n","title":"ハブ API を保護する | ハウツーガイド | ハブ | ウォレット"}}
