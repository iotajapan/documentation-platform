{"path":"docs/smartcity/0.1/astropiota/how-to-guides/connect","templateID":1,"sharedPropsHashes":{},"localProps":{"markdown":"# SSHでRaspberry Piに接続する\n<!-- # Connect to the Raspberry Pi through SSH -->\n\n**モニターやキーボードなしでAstroPiOTAを実行したい場合は、SSHを介して対話するためにAstroPiOTAのネットワークアドレスが必要です。Raspberry PiのIPアドレスを見つけるには、Pythonスクリプトを使用できます。**\n<!-- **If you want to run AstroPiOTA without a monitor and keyboard, you need it's network address to interact with it over SSH. To find the IP address of the Raspberry Pi, you can use a Python script.** -->\n\nPython 3はRaspberry Piにプレインストールされています。\n<!-- Python 3 comes pre-installed on Raspberry Pi. -->\n\n1. ホームフォルダに`senseIP.py`という名前の新しいファイルを作成します。\n  <!-- 1. In your home folder, create a new file called `senseIP.py` -->\n\n    ```bash\n    sudo nano senseIP.py\n    ```\n\n2. ファイルに次のコードを追加します。\n  <!-- 2. Add the following code to the file: -->\n\n    ```python\n    import socket\n    from sense_hat import SenseHat\n    sense = SenseHat()\n\n    def getIP():\n            s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)\n            try:\n                    s.connect(('192.168.255.255',1))        #lab network used for this example\n                    IP = s.getsockname()[0]\n            except:\n                    IP = '127.0.0.1'\n            finally:\n                    s.close()\n            return IP\n\n    senseIP = getIP()\n    for x in range(3):\n            sense.show_message(senseIP, scroll_speed=0.2)\n    ```\n\n3. ファイルを保存して新しいシェルスクリプトを作成します。\n  <!-- 3. Save the file and create a new shell script -->\n\n    ```bash\n    sudo nano senseBoot.sh\n    ```\n\n4. `senseIP.py`スクリプトを実行します。\n  <!-- 4. Run the senseIP.py script -->\n\n    ```bash\n    python3 senseIP.py\n    ```\n\n    ![Screen capture of shell script described in text](/assets/docs/smartcity/0.1/astropiota/RasSenseIP.png)\n\n5. シェルスクリプトを保存し、Raspberry Piの再起動時に実行するようにcronジョブをスケジュールします。\n  <!-- 5. Save the shell script and schedule a cron job to run it when Raspberry Pi reboots -->\n\n    ```bash\n    crontab -e\n    ```\n\n6. `/tmp/crontab.0QNkTW/crontab`ファイルの末尾に次のコマンドを追加します。\n  <!-- 6. Add the following command at the bottom of the /tmp/crontab.0QNkTW/crontab file: -->\n\n    ```bash\n    @reboot /home/pi/senseBoot.sh\n    ```\n\n    ![Screen capture of crontab file update described in text](/assets/docs/smartcity/0.1/astropiota/RasCron.png)\n\n7. Raspberry Piを再起動してcronジョブを開始します。数秒待ってから、Raspberry PiのIPアドレスがSense HATのLEDパネルを横切ってスクロールするのを確認します。\n  <!-- 7. Restart Raspberry Pi to start the cron job. Wait a second or two, then see its IP address scrolling across the Sense HAT LED panel. -->\n\n8. SSH接続を開き、Raspberry PiのIPアドレスに接続します。\n  <!-- 8. Open an SSH connection and connect to the IP address of your Raspberry Pi -->\n\nRaspberry Piをシャットダウンするには、以下行います。\n<!-- To shut down the Raspberry Pi, do the following: -->\n\n```bash\nsudo shutdown now\n```\n","title":"SHH接続を介してAstroPiOTAに接続する | AstroPiOTA | AstroPiOTA"}}
