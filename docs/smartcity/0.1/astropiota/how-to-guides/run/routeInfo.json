{"path":"docs/smartcity/0.1/astropiota/how-to-guides/run","templateID":1,"sharedPropsHashes":{},"localProps":{"markdown":"# Run AstroPiOTA\n\nThe following instructions assume the operating system is configured. Because this installation has several components, scripts are included to make sure that each component works individually before combining them.\n\n## Prerequisites\n\nThe following prerequisites are pre-installed on Raspbian Jessie:\n\n- Python3\n- Pip3.2\n- Node.js (8+)\n- [AstroPiOTA package](https://github.com/NelsonPython/AstroPiOTA.git)\n- [Sense HAT Node.js package](https://www.npmjs.com/package/node-sense-hat)\n- [IOTA JavaScript Library](https://github.com/iotaledger/iota.lib.js)\n\n\n## Configure Raspberry Pi\n\nThe easiest way to configure Raspberry Pi is by directly interacting with it. Plug-in monitor, keyboard and mouse.\n\n1. Turn on the Raspberry Pi, which will automatically boot with the default user and password\n\n    ```\n    Default username:  pi\n    Default password:  raspberry\n    ```\n\n2. Connect the Raspberry Pi to WiFi\n\n3. Set the keyboard mapping to USA English. Otherwise, you will be surprised when installation commands fail because the pipe symbol (|) is mapped to the tilde symbol (~).\n\n4. Click the Raspberry in the menu, and go to **Preferences** > **Raspberry Pi Configuration**  \n\n    ![Raspberry Pi configuration window as described in text](/assets/docs/smartcity/0.1/astropiota/Localisation.png)\n\n5. Click **Localisation** > **Set Keyboard**, and select **United States -> English (US)**. You can also set your locale, timezone, and WiFi country.  \n\n    ![Window for setting localisation as described in text](/assets/docs/smartcity/0.1/astropiota/localisation2.png)\n\n6. Click **Interfaces** and enable SSH so you can connect remotely with PuTTY \n\n    ![Window for enabling SSH as described in text](/assets/docs/smartcity/0.1/astropiota/SSH.png)\n\n## Install Node.js\n\nRaspbian Jessie comes with NodeRed, which must be removed.\n\n1. Remove NodeRed and legacy nodejs modules\n\n    ```bash\n    sudo apt-get remove nodered -y\n    sudo apt-get remove nodejs nodejs-legacy -y\n    ```\n\n2. Reboot the Raspberry Pi\n\n3. Install Node.js 8\n\n    ```bash\n    curl -sL https://deb.nodesource.com/setup_8.x | sudo bash -\n    sudo apt-get install nodejs -y\n    node -v\n    npm -v\n    ```\n\n## Install the IOTA JavaScript Library\n\n1. Download and install the IOTA JavaScript library\n\n    ```bash\n    git clone https://github.com/iotaledger/iota.lib.js\n    cd iota.lib.js\n    sudo npm install iota.lib.js\n    ```\n\n2. Check your installation by retrieving Node information from the IOTA Developer's Tangle.  Open a text file and copy this script:\n\n  ```javascript\n  var request = require('request');\n\n  var command = {\n      'command': 'getNodeInfo'\n  };\n\n  var options = {\n    url: 'https://nodes.devnet.iota.org:443',\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'X-IOTA-API-Version': '1',\n      'Content-Length': Buffer.byteLength(JSON.stringify(command))\n    },\n    json: command\n  };\n\n  request(options, function (error, response, data) {\n    if (!error && response.statusCode == 200) {\n      console.log(data);\n    }\n  });\n  ```\n\n3. Save the file in the iota.lib.js folder as `getNode.js` then run it\n\n    ```bash\n    node getNode.js\n    ```\n\nYou should see statistics about the node, including `appName`, `appVersion`, `latestMilestone`, `neighbors`, `tips`, and more\n\n## Install Sense HAT\n\n1. Install Sense Hat in the AstroPiOTA package. Sense HAT requires that Python drivers be installed manually:\n\n    ```bash\n    sudo apt-get update\n    sudo apt-get install sense-hat\n    sudo pip-3.2 install pillow\n    ```\n\n**Note:** See the [Driver documentation](https://pythonhosted.org/sense-hat/) for more information\n\n2. To make sure that Sense HAT is working, open python3 and do these commands:\n\n    ```python\n    python3\n    >>>from sense_hat import SenseHat\n    >>>sense = SenseHat()\n    >>>sense.show_message(\"Hello Sense Hat\")\n    ```\n\nThe message \"Hello Sense Hat\" will scroll across the Sense Hat led panel.\n\n3. Now, install node-sense-hat in your user folder\n\n    ```bash\n    sudo npm install --unsafe-perm --verbose node-sense-hat\n    ```\n\nFor more information see the following resources:\n\n[Sense HAT node library](https://github.com/balena-io-playground/node-sense-hat)\n\n[sense-hat npm](https://www.npmjs.com/package/sense-hat)\n\n\n## Install AstroPiOTA\n\nDownload and install AstroPiOTA\n\n```bash\ngit clone https://github.com/NelsonPython/AstroPiOTA.git\nsudo npm install\n```\n\n## Run AstroPiOTA\n\n1. Open a terminal window and execute the sender.js script\n\n    ```bash\n    npm run sender\n    ```\n\n    You should see a command in the output:\n\n    ```\n    npm run receiver ADDRESSXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\n    ```\n\n2. Copy the output command and paste it into another terminal window to monitor the MAM Stream\n\n![Example output from sender.js](/assets/docs/smartcity/0.1/astropiota/AstroPiOTASender.png)\n\n![Example output from receiver.js](/assets/docs/smartcity/0.1/astropiota/AstroPiOTAReceiver.png)\n","title":"ソフトウェアをインストールして実行する | AstroPiOTA | スマートシティ"}}
