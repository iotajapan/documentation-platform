{"path":"docs/hub/0.1/references/api-reference","templateID":1,"sharedPropsHashes":{},"localProps":{"markdown":"# API reference\n\n**To simplify connections to the Tangle and the Hub database, Hub has a gRPC API. Use this API reference to find methods and learn what they do.**\n\n<a name=\"hub.proto\"></a>\n\n## hub.proto\n\n<a name=\"hub.rpc.Hub\"></a>\n\n### Hub\n\n| Method Name          | Request Type                                                 | Response Type                                                | Description                                                  |\n| -------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |\n| CreateUser           | [CreateUserRequest](#hub.rpc.CreateUserRequest)              | [CreateUserReply](#hub.rpc.CreateUserRequest)                | Creates a new user on the Hub                                |\n| GetBalance           | [GetBalanceRequest](#hub.rpc.GetBalanceRequest)              | [GetBalanceReply](#hub.rpc.GetBalanceRequest)                | Returns the available balance for a user                     |\n| GetDepositAddress    | [GetDepositAddressRequest](#hub.rpc.GetDepositAddressRequest) | [GetDepositAddressReply](#hub.rpc.GetDepositAddressRequest)  | Creates a new deposit address for a user                     |\n| UserWithdraw         | [UserWithdrawRequest](#hub.rpc.UserWithdrawRequest)          | [UserWithdrawReply](#hub.rpc.UserWithdrawRequest)            | Submits a withdrawal request for a user.                     |\n| UserWithdrawCancel   | [UserWithdrawCancelRequest](#hub.rpc.UserWithdrawCancelRequest) | [UserWithdrawCancelReply](#hub.rpc.UserWithdrawCancelRequest) | Attempts to cancel a user's withdrawal request. Only possible as long as sweep hasn't started yet. |\n| GetUserHistory       | [GetUserHistoryRequest](#hub.rpc.GetUserHistoryRequest)      | [GetUserHistoryReply](#hub.rpc.GetUserHistoryRequest)        | Returns a user's full balance change history as recorded by the Hub |\n| ProcessTransferBatch | [ProcessTransferBatchRequest](#hub.rpc.ProcessTransferBatchRequest) | [ProcessTransferBatchReply](#hub.rpc.ProcessTransferBatchRequest) | Processes a batch of buys/sells from the exchange Note that the amounts of this batch must sum to 0! |\n| BalanceSubscription  | [BalanceSubscriptionRequest](#hub.rpc.BalanceSubscriptionRequest) | [BalanceEvent](#hub.rpc.BalanceSubscriptionRequest)          | Produces a stream of all balance changes as they appear since the provided timestamp |\n| GetStats             | [StatsRequest](#hub.rpc.StatsRequest)                        | [StatsReply](#hub.rpc.StatsRequest)                          | Provides statistics about the Hub                            |\n| SweepSubscription    | [SweepSubscriptionRequest](#hub.rpc.SweepSubscriptionRequest) | [SweepEvent](#hub.rpc.SweepSubscriptionRequest)              | Produces a stream of all sweeps since the provided timestamp |\n| GetAddressInfo       | [GetAddressInfoRequest](#hub.rpc.GetAddressInfoRequest)      | [GetAddressInfoReply](#hub.rpc.GetAddressInfoRequest)        | Provides information on an address if it's owned by the Hub |\n| SweepInfo            | [SweepInfoRequest](#hub.rpc.SweepInfoRequest)                | [SweepEvent](#hub.rpc.SweepInfoRequest)                      | Provides information on the sweep for the given withdrawal or bundle hash |\n| SignBundle           | [SignBundleRequest](#hub.rpc.SignBundleRequest)              | [SignBundleReply](#hub.rpc.SignBundleRequest)                | Provides a signature for a bundle hash                       |\n| SweepDetail          | [SweepDetailRequest](#hub.rpc.SweepDetailRequest)            | [SweepDetailReply](#hub.rpc.SweepDetailRequest)              | Provides detailed information on the sweep for the bundle hash |\n\n<a name=\"messages.proto\"></a>\n\n## messages.proto\n\n<a name=\"hub.rpc.BalanceEvent\"></a>\n\n### BalanceEvent\n\n| **Field**            | **Type**                                                        | **Label** | **Description** |\n| ---------------- | ----------------------------------------------------------- | ----- | ----------- |\n| userAccountEvent | [UserAccountBalanceEvent](#hub.rpc.UserAccountBalanceEvent) |       |             |\n| userAddressEvent | [UserAddressBalanceEvent](#hub.rpc.UserAddressBalanceEvent) |       |             |\n| hubAddressEvent  | [HubAddressBalanceEvent](#hub.rpc.HubAddressBalanceEvent)   |       |             |\n\n<a name=\"hub.rpc.BalanceSubscriptionRequest\"></a>\n\n### BalanceSubscriptionRequest\n\n| Field     | Type              | Label | Description                                                  |\n| --------- | ----------------- | ----- | ------------------------------------------------------------ |\n| newerThan | [uint64](#uint64) |       | Balances newer than this time (MS since epoch) will be retrievd |\n\n<a name=\"hub.rpc.CreateUserReply\"></a>\n\n### CreateUserReply\n\nReply for creating a new user.\n\nCurrently unused.\n\n<a name=\"hub.rpc.CreateUserRequest\"></a>\n\n### CreateUserRequest\n\nRequest for creating a new user.\n\n| Field  | Type              | Label | Description |\n| ------ | ----------------- | ----- | ----------- |\n| userId | [string](#string) |       |             |\n\n<a name=\"hub.rpc.Error\"></a>\n\n### Error\n\nThe generic Error that will be used to return an error code on, e.g. Status::CANCELLED. \t\n\nThe error will be serialized and stored in the Status' detail field.\n\n| Field | Type                            | Label | Description |\n| ----- | ------------------------------- | ----- | ----------- |\n| code  | [ErrorCode](#hub.rpc.ErrorCode) |       |             |\n\n\n<a name=\"hub.rpc.GetAddressInfoReply\"></a>\n\n### GetAddressInfoReply\n\n| Field  | Type              | Label | Description                             |\n| ------ | ----------------- | ----- | --------------------------------------- |\n| userId | [string](#string) |       | The user identifier who owns an address |\n\n<a name=\"hub.rpc.GetAddressInfoRequest\"></a>\n\n### GetAddressInfoRequest\n\n| Field   | Type              | Label | Description            |\n| ------- | ----------------- | ----- | ---------------------- |\n| address | [string](#string) |       | The address to look up |\n\n<a name=\"hub.rpc.GetBalanceReply\"></a>\n\n### GetBalanceReply\n\nReply containing a user's currently available balance\n\n| Field     | Type            | Label | Description                                                  |\n| --------- | --------------- | ----- | ------------------------------------------------------------ |\n| available | [int64](#int64) |       | User balance that is currently available for withdrawal / trades |\n\n<a name=\"hub.rpc.GetBalanceRequest\"></a>\n\n### GetBalanceRequest\n\nRequest for requesting a user's currently available balance.\n\n| Field  | Type              | Label | Description |\n| ------ | ----------------- | ----- | ----------- |\n| userId | [string](#string) |       |             |\n\n<a name=\"hub.rpc.GetDepositAddressReply\"></a>\n\n### GetDepositAddressReply\n\nReply containing the new deposit address.\n\n| Field   | Type              | Label | Description                   |\n| ------- | ----------------- | ----- | ----------------------------- |\n| address | [string](#string) |       | Newly created deposit address |\n\n<a name=\"hub.rpc.GetDepositAddressRequest\"></a>\n\n### GetDepositAddressRequest\n\nRequest for creating a new deposit address for a user.\n\n| Field           | Type              | Label | Description |\n| --------------- | ----------------- | ----- | ----------- |\n| userId          | [string](#string) |       |             |\n| includeChecksum | [bool](#bool)     |       |             |\n\n<a name=\"hub.rpc.GetUserHistoryReply\"></a>\n\n### GetUserHistoryReply\n\n| Field  | Type                                                        | Label    | Description                                    |\n| ------ | ----------------------------------------------------------- | -------- | ---------------------------------------------- |\n| events | [UserAccountBalanceEvent](#hub.rpc.UserAccountBalanceEvent) | repeated | List of all user balance events for given user |\n\n<a name=\"hub.rpc.GetUserHistoryRequest\"></a>\n\n### GetUserHistoryRequest\n\n| Field     | Type              | Label | Description                                                  |\n| --------- | ----------------- | ----- | ------------------------------------------------------------ |\n| userId    | [string](#string) |       | UserId                                                       |\n| newerThan | [uint64](#uint64) |       | Records newer than this time (MS since epoch) will be retrieved |\n\n<a name=\"hub.rpc.HubAddressBalanceEvent\"></a>\n\n### HubAddressBalanceEvent\n\n| Field           | Type                                                        | Label | Description |\n| --------------- | ----------------------------------------------------------- | ----- | ----------- |\n| hubAddress      | [string](#string)                                           |       |             |\n| amount          | [int64](#int64)                                             |       |             |\n| reason          | [HubAddressBalanceReason](#hub.rpc.HubAddressBalanceReason) |       |             |\n| sweepBundleHash | [string](#string)                                           |       |             |\n| timestamp       | [uint64](#uint64)                                           |       |             |\n\n<a name=\"hub.rpc.ProcessTransferBatchReply\"></a>\n\n### ProcessTransferBatchReply\n\n<a name=\"hub.rpc.ProcessTransferBatchRequest\"></a>\n\n### ProcessTransferBatchRequest\n\nThis request contains a netted transfer batch. \nUserIds must be unique.\n\n| Field     | Type                                                         | Label    | Description |\n| --------- | ------------------------------------------------------------ | -------- | ----------- |\n| transfers | [ProcessTransferBatchRequest.Transfer](#hub.rpc.ProcessTransferBatchRequest.Transfer) | repeated |             |\n\n<a name=\"hub.rpc.ProcessTransferBatchRequest.Transfer\"></a>\n\n### ProcessTransferBatchRequest.Transfer\n\n| Field  | Type              | Label | Description |\n| ------ | ----------------- | ----- | ----------- |\n| userId | [string](#string) |       |             |\n| amount | [int64](#int64)   |       |             |\n\n<a name=\"hub.rpc.SignBundleReply\"></a>\n\n### SignBundleReply\n\n| Field     | Type              | Label | Description             |\n| --------- | ----------------- | ----- | ----------------------- |\n| signature | [string](#string) |       | The resulting signature |\n\n<a name=\"hub.rpc.SignBundleRequest\"></a>\n\n### SignBundleRequest\n\n| Field            | Type              | Label | Description                                                  |\n| ---------------- | ----------------- | ----- | ------------------------------------------------------------ |\n| address          | [string](#string) |       | The Hub-owned IOTA address that should be signed. (without checksum) |\n| bundleHash       | [string](#string) |       | The bundle hash that should be signed.                       |\n| authentication   | [string](#string) |       | Authentication token (if used)                                       |\n| validateChecksum | [bool](#bool)     |       | Whether the signer should validate the address                              |\n\n<a name=\"hub.rpc.StatsReply\"></a>\n\n### StatsReply\n\n| Field        | Type              | Label | Description                                 |\n| ------------ | ----------------- | ----- | ------------------------------------------- |\n| totalBalance | [uint64](#uint64) |       | Total balance currently managed by the hub. |\n\n<a name=\"hub.rpc.StatsRequest\"></a>\n\n### StatsRequest\n\n<a name=\"hub.rpc.SweepDetailReply\"></a>\n\n### SweepDetailReply\n\n\n| Field     | Type              | Label    | Description                                                  |\n| --------- | ----------------- | -------- | ------------------------------------------------------------ |\n| confirmed | [bool](#bool)     |          | Sweep's confirmation status                              |\n| trytes    | [string](#string) | repeated | Sweep's transactions trytes                              |\n| tailHash  | [string](#string) | repeated | Sweep's tails hashes (multiple reattachment for each bundle) |\n\n<a name=\"hub.rpc.SweepDetailRequest\"></a>\n\n### SweepDetailRequest\n\n| Field      | Type              | Label | Description             |\n| ---------- | ----------------- | ----- | ----------------------- |\n| bundleHash | [string](#string) |       | Bundle hash of the sweep |\n\n<a name=\"hub.rpc.SweepEvent\"></a>\n\n### SweepEvent\n\n| Field          | Type              | Label    | Description |\n| -------------- | ----------------- | -------- | ----------- |\n| bundleHash     | [string](#string) |          |             |\n| timestamp      | [uint64](#uint64) |          |             |\n| withdrawalUUID | [string](#string) | repeated |             |\n\n<a name=\"hub.rpc.SweepInfoRequest\"></a>\n\n### SweepInfoRequest\n\n| Field          | Type              | Label | Description                |\n| -------------- | ----------------- | ----- | -------------------------- |\n| withdrawalUUID | [string](#string) |       | Withdrawal UUID to look up |\n| bundleHash     | [string](#string) |       | Bundle hash of the sweep |\n\n<a name=\"hub.rpc.SweepSubscriptionRequest\"></a>\n\n### SweepSubscriptionRequest\n\n| Field     | Type              | Label | Description                                                  |\n| --------- | ----------------- | ----- | ------------------------------------------------------------ |\n| newerThan | [uint64](#uint64) |       | Sweeps newer than this time (MS since epoch) will be retrieved |\n\n<a name=\"hub.rpc.UserAccountBalanceEvent\"></a>\n\n### UserAccountBalanceEvent\n\n| Field           | Type                                                         | Label | Description                                                  |\n| --------------- | ------------------------------------------------------------ | ----- | ------------------------------------------------------------ |\n| userId          | [string](#string)                                            |       |                                                              |\n| timestamp       | [uint64](#uint64)                                            |       | Time since epoch in MS when the balance change occured       |\n| type            | [UserAccountBalanceEventType](#hub.rpc.UserAccountBalanceEventType) |       |                                                              |\n| amount          | [int64](#int64)                                              |       |                                                              |\n| sweepBundleHash | [string](#string)                                            |       | Will contain sweep bundle hash on deposit will contain withdrawal uuid on withdrawal or withdrawal cancel |\n| withdrawalUUID  | [string](#string)                                            |       |                                                              |\n\n<a name=\"hub.rpc.UserAddressBalanceEvent\"></a>\n\n### UserAddressBalanceEvent\n\n| Field       | Type                                                         | Label | Description                                                  |\n| ----------- | ------------------------------------------------------------ | ----- | ------------------------------------------------------------ |\n| userId      | [string](#string)                                            |       |                                                              |\n| userAddress | [string](#string)                                            |       |                                                              |\n| amount      | [int64](#int64)                                              |       |                                                              |\n| reason      | [UserAddressBalanceReason](#hub.rpc.UserAddressBalanceReason) |       |                                                              |\n| hash        | [string](#string)                                            |       | Depositing bundle's tail (if reason == DEPOSIT) Bundle hash of sweep (if reason == SWEEP) |\n| timestamp   | [uint64](#uint64)                                            |       |                                                              |\n\n<a name=\"hub.rpc.UserWithdrawCancelReply\"></a>\n\n### UserWithdrawCancelReply\n\nReply for withdrawal cancellation.\n\n| Field   | Type          | Label | Description                          |\n| ------- | ------------- | ----- | ------------------------------------ |\n| success | [bool](#bool) |       | True if withdrawal could be canceled |\n\n\n<a name=\"hub.rpc.UserWithdrawCancelRequest\"></a>\n\n### UserWithdrawCancelRequest\n\nRequest to cancel an already submitted withdrawal.\n\n| Field | Type              | Label | Description                            |\n| ----- | ----------------- | ----- | -------------------------------------- |\n| uuid  | [string](#string) |       | Withdrawal UUID that is to be canceled |\n\n<a name=\"hub.rpc.UserWithdrawReply\"></a>\n\n### UserWithdrawReply\n\n| Field | Type              | Label | Description                |\n| ----- | ----------------- | ----- | -------------------------- |\n| uuid  | [string](#string) |       | This withdrawal's UUID |\n\n<a name=\"hub.rpc.UserWithdrawRequest\"></a>\n\n### UserWithdrawRequest\n\nRequests a user-submitted withdrawal.\n\nThis will fail if the user does not have sufficient balance available.\n\n| Field            | Type              | Label | Description                                                  |\n| ---------------- | ----------------- | ----- | ------------------------------------------------------------ |\n| userId           | [string](#string) |       |                                                              |\n| payoutAddress    | [string](#string) |       | Address the user requests payout to. Should be without checksum. |\n| amount           | [uint64](#uint64) |       | Requested withdrawal amount                                  |\n| tag              | [string](#string) |       | Tag for withdrawal                                           |\n| validateChecksum | [bool](#bool)     |       | should command validate address                              |\n\n<a name=\"hub.rpc.ErrorCode\"></a>\n\n### ErrorCode\n\nError codes that can be returned by the hub.\n\n| Name      | Number | Description         |\n| :------------------------------- | :------ | :------------------------------------------------------------ |\n| EC_UNKNOWN                      | 0      | Unused|                                              \n| USER_EXISTS                     | 1      | UserId already exists|                     \n| USER_DOES_NOT_EXIST             | 2      | UserId does not exist                                   |\n| INSUFFICIENT_BALANCE            | 3      | The user has insufficient balance for this operation        |\n| BATCH_INVALID                   | 4      | The batch is invalid (does not sum to 0 or user ids not unique) |\n| BATCH_INCONSISTENT              | 5      | The batch is inconsistent (attempt to remove funds from a user's account without sufficient balance) |\n| BATCH_AMOUNT_ZERO               | 6      | The amount associated with the transfer is invalid (should be greater or less than 0) |\n| UNKNOWN_ADDRESS                 | 7      | The address is not known to the hub                          |\n| WITHDRAWAL_CAN_NOT_BE_CANCELLED | 8      | Either the withdrawal has been swept or cancelled already    |\n| INELIGIBLE_ADDRESS              | 9      | Address was not eligible for the requested operation.        |\n| INVALID_AUTHENTICATION          | 10     | Provided authentication token was invalid.                   |\n| CHECKSUM_INVALID                | 11     | Provided address contained invalid checksum                  |\n| SIGNING_FAILED                  | 12     | Call to rpc signing_server failed (GetSignatureForUUID)      |\n| GET_ADDRESS_FAILED              | 13     | Call to rpc signing_server failed (GetAddressForUUID)        |\n| GET_SECURITY_LEVEL_FAILED       | 14     | Call to rpc signing_server failed (GetSecurityLevel)         |\n\n<a name=\"hub.rpc.HubAddressBalanceReason\"></a>\n\n### HubAddressBalanceReason\n\n| Name        | Number | Description                               |\n| ----------- | ------ | ----------------------------------------- |\n| HUB_UNKNOWN | 0      |                                           |\n| INBOUND     | 1      | Sweep inbound (used as remainder address) |\n| OUTBOUND    | 2      | Sweep outbound (used as input)            |\n\n<a name=\"hub.rpc.UserAccountBalanceEventType\"></a>\n\n### UserAccountBalanceEventType\n\n| Name                | Number | Description       |\n| :------------------- | :------ | :------------------------------------------------------------ |\n| UAB_UNKNOWN         | 0      | Unused                                                       |\n| DEPOSIT             | 1      | Deposit into user account (positive amount)                  |\n| BUY                 | 2      | User received tokens as part of a transfer batch (positive amount) |\n| WITHDRAWAL          | 3      | User withdrawal request (negative amount)                    |\n| WITHDRAWAL_CANCELED | 4      | Cancelled user withdrawal request (positive amount)          |\n| SELL                | 5      | User lost tokens as part of a transfer batch (negative amount) |\n\n<a name=\"hub.rpc.UserAddressBalanceReason\"></a>\n\n### UserAddressBalanceReason\n\n| Name         | Number | Description              |\n| ------------ | ------ | ------------------------ |\n| UADD_UNKNOWN | 0      |                          |\n| UA_DEPOSIT   | 1      | New user deposit tracked |\n| UA_SWEEP     | 2      | Hub-sweep.               |\n\n## Scalar Value Types\n\n| .proto Type                    | Notes                                                        | C++ Type | Java Type  | Python Type |\n| ------------------------------ | ------------------------------------------------------------ | -------- | ---------- | ----------- |\n| <a name=\"double\" /> double     |                                                              | double   | double     | float       |\n| <a name=\"float\" /> float       |                                                              | float    | float      | float       |\n| <a name=\"int32\" /> int32       | Uses variable-length encoding. Inefficient for encoding negative numbers – if your field is likely to have negative values, use sint32 instead. | int32    | int        | int         |\n| <a name=\"int64\" /> int64       | Uses variable-length encoding. Inefficient for encoding negative numbers – if your field is likely to have negative values, use sint64 instead. | int64    | long       | int/long    |\n| <a name=\"uint32\" /> uint32     | Uses variable-length encoding.                               | uint32   | int        | int/long    |\n| <a name=\"uint64\" /> uint64     | Uses variable-length encoding.                               | uint64   | long       | int/long    |\n| <a name=\"sint32\" /> sint32     | Uses variable-length encoding. Signed int value. These more efficiently encode negative numbers than regular int32s. | int32    | int        | int         |\n| <a name=\"sint64\" /> sint64     | Uses variable-length encoding. Signed int value. These more efficiently encode negative numbers than regular int64s. | int64    | long       | int/long    |\n| <a name=\"fixed32\" /> fixed32   | Always four bytes. More efficient than uint32 if values are often greater than 2<sup>28</sup>. | uint32   | int        | int         |\n| <a name=\"fixed64\" /> fixed64   | Always eight bytes. More efficient than uint64 if values are often greater than 2<sup>56</sup>. | uint64   | long       | int/long    |\n| <a name=\"sfixed32\" /> sfixed32 | Always four bytes.                                           | int32    | int        | int         |\n| <a name=\"sfixed64\" /> sfixed64 | Always eight bytes.                                          | int64    | long       | int/long    |\n| <a name=\"bool\" /> bool         |                                                              | bool     | boolean    | boolean     |\n| <a name=\"string\" /> string     | A string must always contain UTF-8 encoded or 7-bit ASCII text. | string   | String     | str/Unicode |\n| <a name=\"bytes\" /> bytes       | May contain any arbitrary sequence of bytes.                 | string   | ByteString | str         |\n\n","title":"API reference | References | Hub"}}
